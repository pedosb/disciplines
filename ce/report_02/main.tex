\documentclass[a4paper]{article}

\usepackage[latin1]{inputenc}
%\usepackage[top=3cm,left=3cm,right=2cm,bottom=2cm]{geometry}
\usepackage{mathtools}
\usepackage{amsfonts}
\usepackage{epsfig}
\usepackage{float}
\usepackage[portuguese]{babel}

\author{Pedro Batista}

\title{Experiência 02 - Algoritmo Genético com Normalização e Janelamento para a
Função F6 Elevada}

\date{\today}

\begin{document}
\maketitle

\section{Definição do Problema}

Para a função F6 (Eq.~\ref{eq:f6}) elevada a 999 (Eq.~\ref{eq:f6e}), deve ser
implementado um algoritmo genético (GA) com normalização linear e janelamento. Para
esse trabalho as seguintes especificações foram utilizadas:

\begin{itemize}
	\item Busca por $-100 \le x \le 100$ e $-100 \le y \le 100$.
	\item Precisão de $x$ de pelo menos 4 casas decimais (21 bits).
	\item Precisão de $y$ de pelo menos 5 casas decimais (25 bits).
	\item População de 50 cromossomos.
	\item Máximo de 500 gerações.
	\item Representação binária.
	\item Taxa de cruzamento de 70\%.
	\item Taxa de mutação de 2\%.
	\item Seleção por roleta.
	\item Cruzamento de um ponto.
\end{itemize}

\begin{equation}
		\arg_{x,y \in \mathbb{R}}\max f(x,y) \to f(x,y) =
			0.5 - \frac{\sin{\sqrt{x^2+y^2}}-0.5}
				{\left[1+0.001(x^2+y^2)\right]^2}
	\label{eq:f6}
\end{equation}

\begin{equation}
	\arg_{x,y \in \mathbb{R}}\max fe(x,y) \to
		fe(x,y) = f(x,y) + 999
	\label{eq:f6e}
\end{equation}

\subsection{A Seleção}

A elevação da função F6 diminui a diferença relativa entre os cromossomos, isso
significa que ao selecioná-los pelo método da roleta eles terão probabilidades
muito parecidas e não será trivial a seleção entre o melhor é o pior
individuo. Para visualizar melhor essa situação será descrito a seguir um
exemplo.

Supondo que em uma determinada população da função F6 existem três cromossomos
$a$, $b$ e $c$ com scores $0.8$, $0.5$ e $0.9$ respectivamente. A probabilidade
de cada um deles ser selecionado é:

\[
\begin{array}{lcl}
	P_a & = & \displaystyle\frac{a}{a + b + c} = \frac{0.8}{2.2} =
		0.3635\\[10pt]
	P_b & = & \displaystyle\frac{b}{a + b + c} = \frac{0.5}{2.2} =
		0.2273\\[10pt]
	P_c & = & \displaystyle\frac{c}{a + b + c} = \frac{0.9}{2.2} = 0.4091
\end{array}
\]

Como podemos observar o individuo $c$ tem mais chances de ser selecionado por
ter o maior score. O que é obviamente desejado para um GA. Isso não é observado
quando a função F6 é elevada a $999$ como observamos a seguir. Os novos scores
de $a$, $b$ e $c$ são $999.8$, $999.5$ e $999.9$ respectivamente, levando a uma
nova probabilidade de seleção dada por:

\[
\begin{array}{lcl}
	P_a & = & \displaystyle\frac{a}{a + b + c} = \frac{999.8}{2999.2} =
		0.3333\\[10pt]
	P_b & = & \displaystyle\frac{b}{a + b + c} = \frac{999.5}{2999.2} =
		0.3332\\[10pt]
	P_c & = & \displaystyle\frac{c}{a + b + c} = \frac{999.9}{2999.2} = 0.3334
\end{array}
\]

Dessa forma não é trivial a seleção do melhor individuo, visto que a diferença
na probabilidade de seleção entre eles é muito pequena, Já que a diferença
relativa entre eles também é pequena.

\section{Normalização}

A normalização utilizada aqui é linear. Isso significa que a diferença entre os
score dos cromossomos da população será igual, segundo a equação:
$s_i = \min s + \alpha i$. Sendo que em alguns casos pode ser utilizado
$\alpha=\frac{\max s - \min s}{n-1}$, onde $n$ é o tamanho da população.
Porém nos casos em que $\max s$ é muito próximo de $\min s$ e a diferença
relativa entre eles é pequena esse $\alpha$ não ajuda muito, já que a diferença
relativa não será alterada. Dessa forma nesse trabalho $\alpha$ será atribuído
manualmente a $3$, $15$ e $30$, representando pressão seletiva (diferença
relativa entre os cromossomos da população) baixa, média e alta respectivamente.

\section{Janelamento}

A técnica do janelamento tenta também diminuir a diferença relativa entre os
cromossomos da população. No janelamento uma constante $\beta$ é subtraída de
todos os scores segundo a equação: $s'_i = s_i - \beta$, onde $s'$ é o novo
score do cromossomo.

\section{Modelagem}

A modelagem geral do GA utilizada foi a mesma implementada na Experiência 01
(Algoritmo Genético para a Função F6), as alterações para essa Experiência foram
apenas no método de seleção e cálculo do score.

\section{Metodologia}

Neste trabalho serão realizados cinco experimentos descritos a seguir:
\begin{description}
	\item[GA para a função F6] Para mostrar o desempenho do GA na função F6 sem
		elevação e comparar com o resultado para a F6 elevada a 999.
	\item[GA para a função F6 elevada a 999] Para comparar com o resultado do GA
		para a função F6 sem elevação e mostrar que o resultado para a função F6
		elevada não é bom.
	\item[GA com normalização para a função F6 elevada a 999] Para mostrar o
		efeito da normalização sobre o GA para a função F6 elevada.
	\item[GA com janelamento para a função F6 elevada a 999] Para mostrar o
		efeito da normalização sobre o GA para a função F6 elevada.
	\item[GA com normalização e janelamento para a função F6 elevada a 999] Para
		mostrar o efeito da normalização e janelamento juntos sobre o GA para a
		função F6.
\end{description}

Os resultados apresentados serão selecionados (visualmente) de uma série de
testes com população inicial diferente (diferente seeds para o gerador de
números aleatórios).

\section{Resultados}

\subsection{GA para a Função F6 e F6 Elevada}

Como esperado o GA para as função F6 (Figura~\ref{fig:f6}) convergiu para um valor, e teve sua
execução com um bom espaço de busca variando o mínimo e o máximo elemento e com
vários aumentos no desvio padrão. Esse resultado não foi obtido quando a função
F6 foi elevada a 999 (Figura~\ref{fig:f6e}), onde observamos um espaço de busca pequeno e uma variação
não regulada, no máximo se tornando algo parecido com uma busca aleatória.

\begin{figure}[H]
	\begin{center}
		\epsfig{file=ga_f6.eps,width=1.2\textwidth}
	\end{center}
	\caption{GA para a função F6.}
	\label{fig:f6}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\epsfig{file=ga_f6e.eps,width=1.2\textwidth}
	\end{center}
	\caption{GA para a função F6 elevada a 999.}
	\label{fig:f6e}
\end{figure}

\subsection{GA com Normalização para a Função F6 Elevada a 999}

Com a normalização o GA apresentou melhores resultados comparado ao não
normalizado, o que pode ser observado nas
Figuras~\ref{fig:f6e_alpha3},~\ref{fig:f6e_alpha15}
e~\ref{fig:f6e_alpha30} onde $\alpha$ é ajustado em 3, 15 e 30
respectivamente.

Podemos observar que ao aumentar $\alpha$ obtemos melhores resultados para esse
problema. O que acontece é que como esperado a diferença relativa entre os
cromossomos é aumentada aumentando as chances do melhor cromossomo ser
selecionado e provavelmente formando mais filhos. Outra questão que foi
observada é que o espaço de busca (visualizado pelo desvio padrão) foi aumentado
ao se aumentar $\alpha$ gerando mais diversidade e melhorando o desempenho do
GA.

Uma curiosidade é que em um primeiro momento foi levado a crer que ao aumentar
muito $\alpha$ o GA ficaria preso em um máximo local. O que não foi confirmado
em simulações onde $\alpha=300$ (Figura~\ref{fig:f6e_alpha300}), acredita-se que
isso se deve ao fato de que com $\alpha$ grande o melhor individuo tem muita
chance de ser escolhido e quando esse é gerado por uma mutação ou cruzamento
provavelmente vai ser conservado para a próxima população ou cruzará com outro
gerando uma boa população. O interessante foi que com esse método foi a primeira
vez que encontramos o resultado ótimo para essa representação, com o cromossomo:

\begin{verbatim}
Alelos: 1000000000000000000000111111111111111111111111
X: 100000000000000000000 (0.000048)
Y: 0111111111111111111111111 (-0.000003)
Score: 999.99999999771512
\end{verbatim}

\begin{figure}[H]
	\begin{center}
		\epsfig{file=ga_f6_alpha3.eps,width=1.2\textwidth}
	\end{center}
	\caption{GA para a função F6 elevada a 999 com normalização e $\alpha=3$.}
	\label{fig:f6e_alpha3}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\epsfig{file=ga_f6_alpha15.eps,width=1.2\textwidth}
	\end{center}
	\caption{GA para a função F6 elevada a 999 com normalização e $\alpha=15$.}
	\label{fig:f6e_alpha15}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\epsfig{file=ga_f6_alpha30_2.eps,width=1.2\textwidth}
	\end{center}
	\caption{GA para a função F6 elevada a 999 com normalização e $\alpha=30$.}
	\label{fig:f6e_alpha30}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\epsfig{file=ga_f6_alpha300.eps,width=1.2\textwidth}
	\end{center}
	\caption{GA para a função F6 elevada a 999 com normalização e $\alpha=300$.}
	\label{fig:f6e_alpha300}
\end{figure}

\subsection{GA com Janelamento para a Função F6 Elevada a 999}

Como esperado o Janelamento não influencia muito nos resultados a não ser que
$\beta$ se aproxime de 999 pois se ele for muito menor que 999 a diferença
relativa entre os elementos não será alterada significativamente. Os testes
realizados são mostrados nas Figuras~\ref{fig:f6e_beta300}
e~\ref{fig:f6e_beta800} para $\beta$ igual a 300 e 800 respectivamente.
Confirmando que os resultados não são muito melhores. É sabido que para esse
caso quando $\beta$ é igual a 999 o problema se iguala ao problema da função F6.

\begin{figure}[H]
	\begin{center}
		\epsfig{file=ga_f6e_beta300.eps,width=1.2\textwidth}
	\end{center}
	\caption{GA para a função F6 elevada a 999 com janelamento e $\beta=300$.}
	\label{fig:f6e_beta300}
\end{figure}

\begin{figure}[H]
	\begin{center}
		\epsfig{file=ga_f6e_beta800.eps,width=1.2\textwidth}
	\end{center}
	\caption{GA para a função F6 elevada a 999 com janelamento e $\beta=800$.}
	\label{fig:f6e_beta800}
\end{figure}

\subsection{GA com Janelamento e Normalização para a Função F6 elevada a 999}

Um último experimento juntou janelamento e normalização onde o resultado mais
interessante foi obtido com $\alpha=30$ e $\beta=800$. O resultado ótimo foi
encontrado. O que aconteceu é que o janelamento facilitou o trabalho da
normalização já que a diferença relativa entre os cromossomos ficou maior com um
$\alpha$ menor. O desempenho do GA é mostrado na
Figura~\ref{fig:f6e_beta800_alpha30}.

\begin{figure}[H]
	\begin{center}
		\epsfig{file=ga_f6_alpha30_beta800.eps,width=1.2\textwidth}
	\end{center}
	\caption{GA para a função F6 elevada a 999 com janelamento ($\beta=800$) e
	normalização ($\alpha=30$).}
	\label{fig:f6e_beta800_alpha30}
\end{figure}

\section{Conclusão}

O janelamento mostrou-se uma técnica que pode ser útil em alguns casos para
diminuir a diferença relativa entre os cromossomos e melhorar a seleção. A
normalização linear foi bastante eficiente para a seleção. Um bom teste pode ser
o de uma normalização não linear como a função $-\log(\tanh(\frac{x}{2}))$ que aumenta bem as chances
dos melhores invividos serem selecionados e diminui pouco a dos piores.

\end{document}
